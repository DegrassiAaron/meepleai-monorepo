ID,Title,Description,Component,Type,Priority,Effort,Labels,Milestone,Dependencies,AcceptanceCriteria
INF-01,Inizializzare monorepo e Docker Compose,"Crea struttura monorepo (frontend, api, workers, n8n, db) e Docker Compose base con reti/volumi/healthchecks.",Infra,Task,P0,3,"area/infra,kind/task",MVP,,Repo con compose up che avvia servizi placeholder e healthcheck OK.
INF-02,CI/CD base GitHub Actions,Workflow build+lint+test per frontend e api. Cache dipendenze. PR in draft su branch feature/*.,Infra,Task,P0,3,"area/infra,kind/ci",MVP,INF-01,"Action su PR e main, badge status in README."
SEC-01,Gestione secrets .env e rotazione chiavi,Separare .env.dev/.env.ci; non committare secrets; doc rotazione PAT/OpenRouter; pre-commit per leakage.,Security,Task,P0,2,"area/security,kind/policy",MVP,INF-01,Secrets esclusi dal repo; pre-commit blocca fughe; guida in README.
AUTH-01,Autenticazione e ruoli (Admin/Editor/User),Implementa login/registrazione; ruoli e permessi; sessioni sicure.,Auth,Feature,P0,5,"area/auth,kind/feature",MVP,INF-01,"E2E: accesso/logout, ruoli visibili in UI."
AUTH-02,Single-tenant baseline,"Imposta contesto tenant statico, rimuovi parametri client obbligatori e garantisci fallback sicuro.",Auth,Feature,P0,5,"area/auth,kind/feature",V1,"AUTH-01,DB-01","E2E: registrazione/login senza tenant esplicito; audit coerente." 
DB-01,Schema database iniziale,"Tabelle: users, tenants (default), games, rule_specs, agents, chats, logs.",DB,Task,P0,3,"area/db,kind/schema",MVP,INF-01,Migrazioni applicate; README con descrizione modello single-tenant.
RULE-01,Definizione formale RuleSpec v0,"JSON Schema per regole normalizzate (azioni, fasi, setup, punteggi, edge case).",RuleSpec,Feature,P0,3,"area/rulespec,kind/spec",MVP,DB-01,JSON Schema validato; esempi per 1 gioco.
RULE-02,Versioning e diff RuleSpec,Versionare ogni modifica e mostrare diff leggibile per QA.,RuleSpec,Feature,P1,3,"area/rulespec,kind/feature",V1,"RULE-01,DB-01",UI diff e audit trail su modifiche.
PDF-01,Upload PDF regolamenti,Endpoint e UI per upload; storage; validazioni base; metadati per game.,PDF,Feature,P0,3,"area/pdf,kind/feature",MVP,"AUTH-01,DB-01",PDF visibile in UI e associato al gioco.
PDF-02,Parsing testo + OCR,Estrazione testo con fallback OCR; normalizzazione paragrafi.,PDF,Feature,P0,5,"area/pdf,kind/feature,ai/nlp",MVP,PDF-01,>90% testo parsato su PDF di esempio.
PDF-03,Parser tabelle/flowchart,Integra tabula/camelot; righe come regole atomiche; gestione diagrammi.,PDF,Feature,P1,5,"area/pdf,kind/feature,ai/nlp",V1,PDF-02,Estrazione tabellare su almeno 2 giochi di test.
EDIT-01,Editor grafico RuleSpec,UI per correggere/arricchire le regole parse e validare JSON Schema.,Editor,Feature,P1,5,"area/ui,area/rulespec,kind/feature",V1,"RULE-01,PDF-02","Salvataggio, validazione, undo/redo, preview."
EDIT-02,Diff e versioni RuleSpec in UI,Visual diff tra versioni; rollback; commenti di revisione.,Editor,Feature,P2,3,"area/ui,area/rulespec,kind/feature",V1,"EDIT-01,RULE-02",Rollback funzionante; commenti persistenti.
AI-01,Embeddings e indicizzazione Qdrant,Servizio embeddings HTTP; indicizzazione chunk per game con filtri su gioco/modello.,AI,Feature,P0,5,"area/ai,kind/feature",MVP,"PDF-02,DB-01",Query vettoriali filtrate per gioco.
AI-02,RAG Explain (10 minuti),Pipeline prompt→outline→script breve con citazioni pagina/linea.,AI,Feature,P0,5,"area/ai,kind/feature",MVP,"AI-01,RULE-01",Output con snippet e tempi stimati.
AI-03,RAG Setup guidato,Istruzioni passo-passo per preparazione del gioco con riferimenti.,AI,Feature,P1,3,"area/ai,kind/feature",V1,"AI-01,RULE-01",Checklist completabile; citazioni presenti.
AI-04,Q&A con snippet e fallback Not specified,Risposte con snippet; se non nel contesto → Not specified.,AI,Feature,P1,3,"area/ai,kind/feature",V1,AI-01,E2E: nessuna allucinazione senza snippet.
AI-05,Caching risposte per gioco,Cache explain/setup/Q&A popolari per latenza ridotta.,AI,Task,P2,3,"area/ai,kind/perf",V1,"AI-02,AI-03",Cache hit ≥60% su dataset di test.
UI-01,Chat UI per ogni Meeple Agent,"Interfaccia chat con storia, citazioni, feedback utilità risposta.",UI,Feature,P0,3,"area/ui,kind/feature",MVP,AI-02,Chat funziona con agent del gioco selezionato.
UI-02,Libreria giochi (CRUD),"Lista, filtri, dettaglio gioco con PDF e RuleSpec associato.",UI,Feature,P0,3,"area/ui,kind/feature",MVP,"AUTH-01,DB-01",CRUD completo con validazioni.
UI-03,Wizard import PDF→RuleSpec,Flusso a step: upload→parse→review→publish.,UI,Feature,P1,3,"area/ui,kind/feature",V1,"PDF-02,EDIT-01",Completamento end-to-end per 1 gioco di test.
ADM-01,Dashboard admin e log richieste,"Visualizzare richieste AI, latenza, confidenza, costi token.",Admin,Feature,P1,3,"area/admin,kind/feature",V1,AI-02,Grafici base e esport CSV.
ADM-02,Gestione n8n workflow,Pagina per configurare endpoint e variabili n8n centralizzate.,Admin,Feature,P2,3,"area/admin,kind/feature",V2,INF-01,Salvataggio credenziali sicuro e test connessione.
N8N-01,Webhook /agent/explain,Espone webhook che orchestra RuleSpec+RAG per explain.,n8n,Feature,P0,3,"area/automations,kind/feature",MVP,AI-02,200 OK con payload standardizzato.
N8N-02,Webhook /agent/setup,Espone webhook per setup guidato con checklist.,n8n,Feature,P1,2,"area/automations,kind/feature",V1,AI-03,200 OK con checklist JSON.
N8N-03,Webhook /agent/qa,Espone webhook per Q&A con snippet e Not specified.,n8n,Feature,P1,2,"area/automations,kind/feature",V1,AI-04,200 OK con snippet/refs.
PERF-01,Rate limiting (Redis token bucket),Token bucket per IP/org; header Retry-After.,Perf,Task,P1,2,"area/perf,kind/security",V1,INF-01,Test che verifica limit configurabile.
SEC-02,Audit & RLS tests,Test E2E: RLS e separazione ruoli (owner vs non-owner).,Security,Task,P1,3,"area/security,kind/test",V1,"AUTH-02,DB-01",Test verde per casi A/B/Editor/Admin.
OPS-01,Observability base,"Logging strutturato, tracing locale, dashboard minimo.",Ops,Task,P2,3,"area/ops,kind/infra",V1,INF-02,Log correlati per request-id; dashboard visibile.
OPS-02,Error handling centralizzato API,"Middleware globale per cattura eccezioni; mapping errori 400/404/500; formato risposta standard con error codes; logging automatico stack trace in prod.",Ops,Feature,P1,3,"area/ops,kind/feature",V1,INF-01,"API restituisce JSON error standard; errori loggati con context; test E2E validazione errori."
OPS-03,Error handling frontend,"Error boundaries React; gestione errori API; retry logic; UI feedback utente; logging errori client-side.",Ops,Feature,P1,3,"area/ops,kind/feature",V1,OPS-02,"Error boundaries attivi; toast/modal errori; errori loggati; test fallback UI."
OPS-04,Logging strutturato e correlazione,"Serilog/structured logging; correlation-id per tracciare request attraverso microservizi; livelli log configurabili per ambiente; sensitive data redaction.",Ops,Task,P1,3,"area/ops,kind/infra",V1,OPS-01,"Ogni log con correlation-id; secrets mascherati; config per env; integrazione con OPS-01."
OPS-05,Error monitoring e alerting,"Integrazione Sentry o simile; notifiche su errori critici; aggregazione e deduplicazione; dashboard errori in tempo reale.",Ops,Feature,P2,3,"area/ops,kind/infra",V2,"OPS-02,OPS-03,OPS-04","Errori tracciati centralmente; alert configurati; dashboard operativo."
DOC-01,README progetto (root),"Panoramica, avvio rapido, architettura, badge CI, licenza.",Docs,Task,P0,2,"area/docs,kind/docs",MVP,INF-01,README completo in root.
DOC-02,agents.md per Codex/Claude Code,"Standard di progetto, convenzioni, flusso GitHub Flow, prompt.",Docs,Task,P0,3,"area/docs,kind/docs",MVP,,File agents.md in root e referenziato in README.
DOC-03,CONTRIBUTING e SECURITY,"Linee guida PR, issue templates, disclosure sicurezza.",Docs,Task,P1,2,"area/docs,kind/docs",V1,SEC-01,File presenti e linkati.
API-01,API REST giochi e regole,"Implementa endpoint REST per giochi, rule spec e chat con validazioni e versioning.",API,Feature,P0,3,"area/api,kind/feature",MVP,"AUTH-01,DB-01","Endpoint CRUD coperti da integration test; schema OpenAPI aggiornato."
API-02,Streaming explain RAG,"Aggiunge streaming SSE/WebSocket per explain RAG con aggiornamenti di stato e fallback.",API,Feature,P1,3,"area/api,kind/feature",V1,"API-01,AI-02","Streaming restituisce chunk progressivi; test E2E verificano fallback e timeout."
API-03,Gestione API key e quote,"Gestisce chiavi API per partner, rotazione, quota e integrazione con rate limiting centralizzato.",API,Feature,P1,3,"area/api,area/security,kind/feature",V1,"API-01,PERF-01","Admin può creare/ruotare chiavi; quota applicata e loggata; test E2E passano."
DB-02,Seed dataset demo,"Crea migrazioni seed per giochi, utenti e rule spec demo utili a onboarding e test.",DB,Task,P1,2,"area/db,kind/data",MVP,DB-01,"Migrazioni idempotenti generano dataset demo; test confermano presenza dati base."
DB-03,Indici full-text PDF/RuleSpec,"Configura indici full-text e vettoriali per ricerche su PDF e RuleSpec in Postgres/Qdrant.",DB,Task,P1,3,"area/db,kind/perf",V1,"PDF-02,AI-01","Query di ricerca su dataset demo <200ms; test coprono fallback e mantenimento indici."
AI-06,Valutazione RAG offline,"Costruisce harness di valutazione per RAG con dataset di domande e metriche (precision@k, latency).",AI,Task,P1,3,"area/ai,kind/test",V1,AI-02,"Report metriche generato in CI; soglia minima definita per merge."
AI-07,Versioning prompt e chain,"Versiona prompt LLM e catene con storage centralizzato, rollout sicuro e audit log.",AI,Feature,P1,2,"area/ai,kind/feature",V1,AI-02,"Prompts versionati con possibilità di rollback; audit log disponibile; test unitari presenti."
UI-04,Timeline conversazioni RAG,"Introduce timeline conversazione multi-pane con eventi RAG, citazioni e stato recupero.",UI,Feature,P1,3,"area/ui,kind/feature",V1,"UI-01,API-01","Timeline mostra eventi con riferimenti; test E2E verificano sincronizzazione e filtri."
UI-05,Audit accessibilità baseline,"Esegue audit accessibilità (WCAG AA) su UI principale con fix per tastiera e screen reader.",UI,Task,P1,2,"area/ui,kind/a11y",V1,UI-01,"Audit axe senza errori bloccanti; documentazione checklist aggiornata."
SEC-03,SAST e dependency scanning,"Integra SAST e dependency scanning in CI con soglie di severità e report archiviati.",Security,Task,P0,3,"area/security,kind/ci",MVP,INF-02,"Pipeline fallisce su vulnerabilità High; report disponibile come artefatto CI."
CHESS-01,Definizione RuleSpec per gli scacchi,"Creare una specifica formale delle regole degli scacchi (movimento pezzi, arrocco, en passant, promozione, scacco matto) usando il formato RuleSpec JSON Schema.",RuleSpec,Feature,P1,3,"area/rulespec,kind/spec,ai/chess",V1,RULE-01,"JSON Schema validato per scacchi; copertura completa regole FIDE; esempi di posizioni."
CHESS-02,Dataset regole scacchi e aperture,"Preparare e caricare documento delle regole FIDE, database di aperture comuni (Italiana, Spagnola, Siciliana) e tattiche di base (forchetta, inchiodatura, scoperta).",DB,Task,P1,2,"area/db,kind/data,ai/chess",V1,"DB-01,CHESS-01","Dataset caricato con >20 aperture e >15 tattiche; regole FIDE complete."
CHESS-03,Indicizzazione conoscenza scacchistica,"Generare embeddings e indicizzare in Qdrant le regole degli scacchi, aperture, tattiche e strategie di medio gioco per supportare RAG.",AI,Feature,P1,3,"area/ai,kind/feature,ai/chess",V1,"AI-01,CHESS-02","Query vettoriali filtrate per chess; test retrieval su 10 domande campione con precision >0.8."
CHESS-04,Agente conversazionale scacchi,"Implementare agente AI specializzato che risponde a domande su regole, spiega aperture, suggerisce tattiche e commenta posizioni usando RAG su knowledge base scacchistica.",AI,Feature,P1,5,"area/ai,kind/feature,ai/chess",V1,"CHESS-03,AI-02","Agente risponde correttamente a test set di 15 domande; cita fonti; gestisce posizioni FEN."
CHESS-05,UI Chat scacchi con visualizzazione scacchiera,"Interfaccia chat dedicata con scacchiera integrata (chess.js + chessboard.js o react-chessboard) per visualizzare posizioni FEN e mostrare mosse suggerite dall'agente.",UI,Feature,P1,5,"area/ui,kind/feature,ai/chess",V1,"CHESS-04,UI-01","Chat funzionante con board; carica posizioni FEN; evidenzia mosse suggerite; responsive."
CHESS-06,Webhook n8n per agente scacchi,"Esporre webhook /agent/chess che accetta domande e posizioni FEN, ritornando analisi e suggerimenti dell'agente.",n8n,Feature,P2,2,"area/automations,kind/feature,ai/chess",V2,CHESS-04,"200 OK; accetta JSON con question e optional FEN; risponde con analysis e suggestions."
