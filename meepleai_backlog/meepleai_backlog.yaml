- ID: INF-01
  Title: Inizializzare monorepo e Docker Compose
  Description: Crea struttura monorepo (frontend, api, workers, n8n, db) e Docker
    Compose base con reti/volumi/healthchecks.
  Component: Infra
  Type: Task
  Priority: P0
  Effort: 3
  Labels: area/infra,kind/task
  Milestone: MVP
  Dependencies: .nan
  AcceptanceCriteria: Repo con compose up che avvia servizi placeholder e healthcheck
    OK.
- ID: INF-02
  Title: CI/CD base GitHub Actions
  Description: Workflow build+lint+test per frontend e api. Cache dipendenze. PR in
    draft su branch feature/*.
  Component: Infra
  Type: Task
  Priority: P0
  Effort: 3
  Labels: area/infra,kind/ci
  Milestone: MVP
  Dependencies: INF-01
  AcceptanceCriteria: Action su PR e main, badge status in README.
- ID: SEC-01
  Title: Gestione secrets .env e rotazione chiavi
  Description: Separare .env.dev/.env.ci; non committare secrets; doc rotazione PAT/OpenRouter;
    pre-commit per leakage.
  Component: Security
  Type: Task
  Priority: P0
  Effort: 2
  Labels: area/security,kind/policy
  Milestone: MVP
  Dependencies: INF-01
  AcceptanceCriteria: Secrets esclusi dal repo; pre-commit blocca fughe; guida in
    README.
- ID: AUTH-01
  Title: Autenticazione e ruoli (Admin/Editor/User)
  Description: Implementa login/registrazione; ruoli e permessi; sessioni sicure.
  Component: Auth
  Type: Feature
  Priority: P0
  Effort: 5
  Labels: area/auth,kind/feature
  Milestone: MVP
  Dependencies: INF-01
  AcceptanceCriteria: 'E2E: accesso/logout, ruoli visibili in UI.'
- ID: AUTH-02
  Title: Single-tenant baseline
  Description: Imposta contesto tenant statico con fallback e rimozione parametri client obbligatori.
  Component: Auth
  Type: Feature
  Priority: P0
  Effort: 5
  Labels: area/auth,kind/feature
  Milestone: V1
  Dependencies: AUTH-01,DB-01
  AcceptanceCriteria: 'E2E: utente A non vede dati di B; audit accessi.'
- ID: DB-01
  Title: Schema database iniziale
  Description: 'Tabelle: users, tenants (default), games, rule_specs, agents, chats, logs.'
  Component: DB
  Type: Task
  Priority: P0
  Effort: 3
  Labels: area/db,kind/schema
  Milestone: MVP
  Dependencies: INF-01
  AcceptanceCriteria: Migrazioni applicate; README con diagramma ER.
- ID: RULE-01
  Title: Definizione formale RuleSpec v0
  Description: JSON Schema per regole normalizzate (azioni, fasi, setup, punteggi,
    edge case).
  Component: RuleSpec
  Type: Feature
  Priority: P0
  Effort: 3
  Labels: area/rulespec,kind/spec
  Milestone: MVP
  Dependencies: DB-01
  AcceptanceCriteria: JSON Schema validato; esempi per 1 gioco.
- ID: RULE-02
  Title: Versioning e diff RuleSpec
  Description: Versionare ogni modifica e mostrare diff leggibile per QA.
  Component: RuleSpec
  Type: Feature
  Priority: P1
  Effort: 3
  Labels: area/rulespec,kind/feature
  Milestone: V1
  Dependencies: RULE-01,DB-01
  AcceptanceCriteria: UI diff e audit trail su modifiche.
- ID: PDF-01
  Title: Upload PDF regolamenti
  Description: Endpoint e UI per upload; storage; validazioni base; metadati per game.
  Component: PDF
  Type: Feature
  Priority: P0
  Effort: 3
  Labels: area/pdf,kind/feature
  Milestone: MVP
  Dependencies: AUTH-01,DB-01
  AcceptanceCriteria: PDF visibile in UI e associato al gioco.
- ID: PDF-02
  Title: Parsing testo + OCR
  Description: Estrazione testo con fallback OCR; normalizzazione paragrafi.
  Component: PDF
  Type: Feature
  Priority: P0
  Effort: 5
  Labels: area/pdf,kind/feature,ai/nlp
  Milestone: MVP
  Dependencies: PDF-01
  AcceptanceCriteria: '>90% testo parsato su PDF di esempio.'
- ID: PDF-03
  Title: Parser tabelle/flowchart
  Description: Integra tabula/camelot; righe come regole atomiche; gestione diagrammi.
  Component: PDF
  Type: Feature
  Priority: P1
  Effort: 5
  Labels: area/pdf,kind/feature,ai/nlp
  Milestone: V1
  Dependencies: PDF-02
  AcceptanceCriteria: Estrazione tabellare su almeno 2 giochi di test.
- ID: EDIT-01
  Title: Editor grafico RuleSpec
  Description: UI per correggere/arricchire le regole parse e validare JSON Schema.
  Component: Editor
  Type: Feature
  Priority: P1
  Effort: 5
  Labels: area/ui,area/rulespec,kind/feature
  Milestone: V1
  Dependencies: RULE-01,PDF-02
  AcceptanceCriteria: Salvataggio, validazione, undo/redo, preview.
- ID: EDIT-02
  Title: Diff e versioni RuleSpec in UI
  Description: Visual diff tra versioni; rollback; commenti di revisione.
  Component: Editor
  Type: Feature
  Priority: P2
  Effort: 3
  Labels: area/ui,area/rulespec,kind/feature
  Milestone: V1
  Dependencies: EDIT-01,RULE-02
  AcceptanceCriteria: Rollback funzionante; commenti persistenti.
- ID: AI-01
  Title: Embeddings e indicizzazione Qdrant
  Description: Servizio embeddings HTTP; indicizzazione chunk per game con filtri.
  Component: AI
  Type: Feature
  Priority: P0
  Effort: 5
  Labels: area/ai,kind/feature
  Milestone: MVP
  Dependencies: PDF-02,DB-01
  AcceptanceCriteria: Query vettoriali filtrate per gioco.
- ID: AI-02
  Title: RAG Explain (10 minuti)
  Description: Pipeline prompt→outline→script breve con citazioni pagina/linea.
  Component: AI
  Type: Feature
  Priority: P0
  Effort: 5
  Labels: area/ai,kind/feature
  Milestone: MVP
  Dependencies: AI-01,RULE-01
  AcceptanceCriteria: Output con snippet e tempi stimati.
- ID: AI-03
  Title: RAG Setup guidato
  Description: Istruzioni passo-passo per preparazione del gioco con riferimenti.
  Component: AI
  Type: Feature
  Priority: P1
  Effort: 3
  Labels: area/ai,kind/feature
  Milestone: V1
  Dependencies: AI-01,RULE-01
  AcceptanceCriteria: Checklist completabile; citazioni presenti.
- ID: AI-04
  Title: Q&A con snippet e fallback Not specified
  Description: Risposte con snippet; se non nel contesto → Not specified.
  Component: AI
  Type: Feature
  Priority: P1
  Effort: 3
  Labels: area/ai,kind/feature
  Milestone: V1
  Dependencies: AI-01
  AcceptanceCriteria: 'E2E: nessuna allucinazione senza snippet.'
- ID: AI-05
  Title: Caching risposte per gioco
  Description: Cache explain/setup/Q&A popolari per latenza ridotta.
  Component: AI
  Type: Task
  Priority: P2
  Effort: 3
  Labels: area/ai,kind/perf
  Milestone: V1
  Dependencies: AI-02,AI-03
  AcceptanceCriteria: Cache hit ≥60% su dataset di test.
- ID: UI-01
  Title: Chat UI per ogni Meeple Agent
  Description: Interfaccia chat con storia, citazioni, feedback utilità risposta.
  Component: UI
  Type: Feature
  Priority: P0
  Effort: 3
  Labels: area/ui,kind/feature
  Milestone: MVP
  Dependencies: AI-02
  AcceptanceCriteria: Chat funziona con agent del gioco selezionato.
- ID: UI-02
  Title: Libreria giochi (CRUD)
  Description: Lista, filtri, dettaglio gioco con PDF e RuleSpec associato.
  Component: UI
  Type: Feature
  Priority: P0
  Effort: 3
  Labels: area/ui,kind/feature
  Milestone: MVP
  Dependencies: AUTH-01,DB-01
  AcceptanceCriteria: CRUD completo con validazioni.
- ID: UI-03
  Title: Wizard import PDF→RuleSpec
  Description: 'Flusso a step: upload→parse→review→publish.'
  Component: UI
  Type: Feature
  Priority: P1
  Effort: 3
  Labels: area/ui,kind/feature
  Milestone: V1
  Dependencies: PDF-02,EDIT-01
  AcceptanceCriteria: Completamento end-to-end per 1 gioco di test.
- ID: ADM-01
  Title: Dashboard admin e log richieste
  Description: Visualizzare richieste AI, latenza, confidenza, costi token.
  Component: Admin
  Type: Feature
  Priority: P1
  Effort: 3
  Labels: area/admin,kind/feature
  Milestone: V1
  Dependencies: AI-02
  AcceptanceCriteria: Grafici base e esport CSV.
- ID: ADM-02
  Title: Gestione n8n workflow
  Description: Pagina per configurare endpoint e variabili n8n centralizzate.
  Component: Admin
  Type: Feature
  Priority: P2
  Effort: 3
  Labels: area/admin,kind/feature
  Milestone: V2
  Dependencies: INF-01
  AcceptanceCriteria: Salvataggio credenziali sicuro e test connessione.
- ID: N8N-01
  Title: Webhook /agent/explain
  Description: Espone webhook che orchestra RuleSpec+RAG per explain.
  Component: n8n
  Type: Feature
  Priority: P0
  Effort: 3
  Labels: area/automations,kind/feature
  Milestone: MVP
  Dependencies: AI-02
  AcceptanceCriteria: 200 OK con payload standardizzato.
- ID: N8N-02
  Title: Webhook /agent/setup
  Description: Espone webhook per setup guidato con checklist.
  Component: n8n
  Type: Feature
  Priority: P1
  Effort: 2
  Labels: area/automations,kind/feature
  Milestone: V1
  Dependencies: AI-03
  AcceptanceCriteria: 200 OK con checklist JSON.
- ID: N8N-03
  Title: Webhook /agent/qa
  Description: Espone webhook per Q&A con snippet e Not specified.
  Component: n8n
  Type: Feature
  Priority: P1
  Effort: 2
  Labels: area/automations,kind/feature
  Milestone: V1
  Dependencies: AI-04
  AcceptanceCriteria: 200 OK con snippet/refs.
- ID: PERF-01
  Title: Rate limiting (Redis token bucket)
  Description: Token bucket per IP/org; header Retry-After.
  Component: Perf
  Type: Task
  Priority: P1
  Effort: 2
  Labels: area/perf,kind/security
  Milestone: V1
  Dependencies: INF-01
  AcceptanceCriteria: Test che verifica limit configurabile.
- ID: SEC-02
  Title: Audit & RLS tests
  Description: 'Test E2E: RLS e separazione ruoli (owner vs non-owner).'
  Component: Security
  Type: Task
  Priority: P1
  Effort: 3
  Labels: area/security,kind/test
  Milestone: V1
  Dependencies: AUTH-02,DB-01
  AcceptanceCriteria: Test verde per casi A/B/Editor/Admin.
- ID: OPS-01
  Title: Observability base
  Description: Logging strutturato, tracing locale, dashboard minimo.
  Component: Ops
  Type: Task
  Priority: P2
  Effort: 3
  Labels: area/ops,kind/infra
  Milestone: V1
  Dependencies: INF-02
  AcceptanceCriteria: Log correlati per request-id; dashboard visibile.
- ID: DOC-01
  Title: README progetto (root)
  Description: Panoramica, avvio rapido, architettura, badge CI, licenza.
  Component: Docs
  Type: Task
  Priority: P0
  Effort: 2
  Labels: area/docs,kind/docs
  Milestone: MVP
  Dependencies: INF-01
  AcceptanceCriteria: README completo in root.
- ID: DOC-02
  Title: agents.md per Codex/Claude Code
  Description: Standard di progetto, convenzioni, flusso GitHub Flow, prompt.
  Component: Docs
  Type: Task
  Priority: P0
  Effort: 3
  Labels: area/docs,kind/docs
  Milestone: MVP
  Dependencies: .nan
  AcceptanceCriteria: File agents.md in root e referenziato in README.
- ID: DOC-03
  Title: CONTRIBUTING e SECURITY
  Description: Linee guida PR, issue templates, disclosure sicurezza.
  Component: Docs
  Type: Task
  Priority: P1
  Effort: 2
  Labels: area/docs,kind/docs
  Milestone: V1
  Dependencies: SEC-01
  AcceptanceCriteria: File presenti e linkati.
